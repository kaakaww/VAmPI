# JWT Authentication + OpenAPI-guided scan for VAmPI
# Combines authentication with OpenAPI spec for comprehensive coverage
app:
  applicationId: ${APP_ID:06b1c634-4c0b-4e76-8fcd-3f81af787383}
  env: ${APP_ENV:dev-auth-jwt-openapi}
  host: ${APP_HOST:http://localhost:5000}

  authentication:
    # Login credentials
    usernamePassword:
      type: JSON
      loginPath: /users/v1/login
      usernameField: username
      passwordField: password
      scanUsername: "name1"
      scanPassword: "pass1"

    # Extract JWT token from response
    tokenExtraction:
      type: TOKEN_PATH
      value: "auth_token"

    # Use token in Authorization header
    tokenAuthorization:
      type: HEADER
      value: Authorization
      tokenType: Bearer

    # Test path to verify authentication
    testPath:
      path: /me
      success: ".*200.*"

    # Logged in/out indicators
    loggedInIndicator: ".*success.*"
    loggedOutIndicator: ".*fail.*"

  openApiConf:
    # Path to OpenAPI spec file
    filePath: openapi_specs/openapi3.yml

    # Test all HTTP methods defined in the spec
    includeAllMethods: true

    # Custom variables for parameterized endpoints
    customVariables:
      - field: username
        values:
          - "name1"
          - "name2"
          - "admin"
      - field: book_title
        values:
          - "bookTitle77"
          - "bookTitle85"
          - "bookTitle47"
      - field: email
        values:
          - "updated1@example.com"
          - "updated2@example.com"
      - field: password
        values:
          - "newpass123"
          - "updatedpass"
      - field: secret
        values:
          - "test_secret_123"
          - "confidential_data"
